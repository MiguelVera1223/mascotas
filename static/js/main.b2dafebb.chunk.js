(this["webpackJsonpreact-formularios"]=this["webpackJsonpreact-formularios"]||[]).push([[0],{110:function(e,a,t){"use strict";t.r(a);var c=t(2),n=t(4),s=t(20),r=t.n(s),o=t(13),i=t(7),l=t(12),d=t(10),m=t.n(d),b=function(){return Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(c.jsx)("a",{className:"navbar-brand",href:"!#",children:"MASCOTAS"}),Object(c.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(c.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item active",children:Object(c.jsxs)("a",{className:"nav-link",href:"!#",children:["Home ",Object(c.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link",href:"!#",children:"Link"})}),Object(c.jsxs)("li",{className:"nav-item dropdown",children:[Object(c.jsx)("a",{className:"nav-link dropdown-toggle",href:"!#",id:"dropdownId","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Dropdown"}),Object(c.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownId",children:[Object(c.jsx)("a",{className:"dropdown-item",href:"!#",children:"Action 1"}),Object(c.jsx)("a",{className:"dropdown-item",href:"!#",children:"Action 2"})]})]})]}),Object(c.jsxs)("form",{className:"form-inline my-2 my-lg-0",children:[Object(c.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}),Object(c.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})]})]})]})},u=t(11),j=t.n(u),h=t(14),p=t(23),f=t.n(p),x="https://5fa1b9a9ba0736001613b0b0.mockapi.io",O=function(){var e=Object(h.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(x,"/mascota"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat(x,"/mascota"),JSON.stringify(a),{headers:{"Content-type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(j.a.mark((function e(a){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/mascota/").concat(a),{method:"DELETE"});case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(x,"/mascota/").concat(a.mascota_id),JSON.stringify(a),{headers:{"Content-type":"Application/json"}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_={mascota_nombre:"",mascota_raza:0,mascota_tipo:0,mascota_edad:0,mascota_colores:"",mascota_activo:!1},w=function(e){var a=e.traerMascotas,t=e.mascotaEditar,s=Object(n.useState)(_),r=Object(l.a)(s,2),d=r[0],b=r[1],u=Object(n.useState)("crear"),j=Object(l.a)(u,2),h=j[0],p=j[1],f=function(e){var a="checkbox"===e.target.type?e.target.checked:e.target.value;b(Object(i.a)(Object(i.a)({},d),{},Object(o.a)({},e.target.name,a)))};return Object(n.useEffect)((function(){console.log("Use effect cuando cambia la mascotaEditar"),null!==t&&(b(t),p("editar"))}),[t]),Object(c.jsx)("div",{className:"row mt-4",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{className:"row",onSubmit:function(e){e.preventDefault(),"crear"===h?m.a.fire({title:"\xbfRegistrar mascota?",text:"Se guardar\xe1 en la base de datos",icon:"question",showCancelButton:!0}).then((function(e){e.isConfirmed&&v(d).then((function(e){e.mascota_id&&(a(),b(_),m.a.fire({title:"Registrado!",text:"Mascota registrada correctamente",icon:"success",timer:1500}))}))})):m.a.fire({title:"\xbfEditar?",text:"\xbfSeguro que desea editar el registro de la mascota?",icon:"question",showCancelButton:!0}).then((function(e){e.isConfirmed&&N(Object(i.a)({},d)).then((function(e){200===e.status&&(b(_),p("crear"),a(),m.a.fire({position:"top-end",timer:1e3,title:"Registro actualizado!",icon:"success",showConfirmButton:!1}))}))}))},children:[Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Ingrese nombre",name:"mascota_nombre",onChange:f,value:d.mascota_nombre})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"Raza:"}),Object(c.jsxs)("select",{className:"form-control",name:"mascota_raza",value:d.mascota_raza,onChange:f,children:[Object(c.jsx)("option",{value:"0",children:"Seleccione"}),Object(c.jsx)("option",{value:"1",children:"Bull Terrier"})]})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"Colores:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"mascota_colores",onChange:f,value:d.mascota_colores,placeholder:"Ingrese colores"})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"Edad"}),Object(c.jsx)("input",{type:"number",name:"mascota_edad",value:d.mascota_edad,onChange:f,className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"Tipo"}),Object(c.jsxs)("select",{className:"form-control",value:d.mascota_tipo,name:"mascota_tipo",onChange:f,children:[Object(c.jsx)("option",{value:"0",children:"Seleccione"}),Object(c.jsx)("option",{value:"1",children:"Perro"})]})]}),Object(c.jsxs)("div",{className:"form-group col-md-6",children:[Object(c.jsx)("label",{htmlFor:"",children:"\xbfRegistro activo?"}),Object(c.jsxs)("div",{className:"input-group mb-3",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("div",{className:"input-group-text",children:Object(c.jsx)("input",{type:"checkbox",checked:d.mascota_activo,name:"mascota_activo",onChange:f,"aria-label":"Checkbox for following text input",id:"checkActivo"})})}),Object(c.jsx)("label",{htmlFor:"checkActivo",className:"form-control",children:"Activo"})]})]}),Object(c.jsx)("div",{className:"form-group col-md-6",children:Object(c.jsx)("button",{className:"btn btn-block btn-primary",type:"submit",children:"crear"===h?"Crear Mascota":"Guardar Cambios"})}),Object(c.jsx)("div",{className:"form-group col-md-6",children:Object(c.jsx)("button",{className:"btn btn-block btn-danger",type:"button",children:"Cancelar"})})]})})})})})},y=t(52),k=t(51),C=t.n(k),E=(t(109),function(e){var a=e.mascotas,t=e.setMascotas,n=e.traerMascotas,s=e.setMascotaEditar,r={columns:[{label:"Id",field:"mascota_id"},{label:"Nombre",field:"mascota_nombre"},{label:"Raza",field:"mascota_raza"},{label:"Colores",field:"mascota_colores"},{label:"Tipo",field:"mascota_tipo"},{label:"Edad",field:"mascota_edad"},{label:"Activo",field:"mascota_activo"},{label:"Acciones",field:"acciones"}],rows:a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{mascota_activo:Object(c.jsx)(C.a,{defaultChecked:e.mascota_activo,onChange:function(c){var n,s;n=c.target.checked,s=Object(i.a)({},e),N(Object(i.a)(Object(i.a)({},s),{},{mascota_activo:n})).then((function(e){if(200===e.status){var c=a.map((function(e){return e.mascota_id===s.mascota_id&&(console.log("cambiando estado"),e.mascota_activo=n),e}));t(c),m.a.fire({position:"top-end",icon:"success",title:"Registro actualizado",showConfirmButton:!1,timer:1e3})}}))}}),acciones:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"btn btn-secondary mr-2",onClick:function(){s(Object(i.a)({},e))},children:"Editar"}),Object(c.jsx)("button",{className:"btn btn-danger",onClick:function(){var a;a=e.mascota_id,m.a.fire({title:"\xbfEliminar?",icon:"error",text:"Los cambios ser\xe1n irreversibles",showCancelButton:!0}).then((function(e){e.isConfirmed&&g(a).then((function(e){e.mascota_id&&(t([]),n(),m.a.fire({title:"Eliminado!",text:"Registro eliminado satisfactoriamente",timer:1500,icon:"success"}))}))}))},children:"Eliminar"})]})})}))};return Object(c.jsx)("div",{className:"row mt-4",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)(y.c,{className:"text-center",responsive:!0,striped:!0,bordered:!0,hover:!0,data:r})})})})})}),S=function(){var e=Object(n.useState)([]),a=Object(l.a)(e,2),t=a[0],s=a[1],r=Object(n.useState)(null),o=Object(l.a)(r,2),i=o[0],d=o[1],m=function(){var e=Object(h.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{traerMascotas:m,mascotaEditar:i}),Object(c.jsx)(E,{mascotas:t,traerMascotas:m,setMascotaEditar:d,setMascotas:s})]})},M=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b,{}),Object(c.jsx)("main",{className:"container mt-4",children:Object(c.jsx)(S,{})})]})};r.a.render(Object(c.jsx)(M,{}),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.b2dafebb.chunk.js.map